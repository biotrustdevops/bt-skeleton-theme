{% liquid
  assign heading_text = section.settings.heading_text | default: 'Shop by Healthy Aging Category'
%}

<section class="py-12 md:py-16 bg-gray-50" data-section-id="{{ section.id }}">
  <div class="md:container md:mx-auto px-3 md:px-4">
    {% if heading_text != blank %}
      <h2 class="text-[74px] font-normal leading-[120%] text-bt-blue text-center mb-10 md:mb-14" style="font-family: 'League Gothic', sans-serif;">{{ heading_text }}</h2>
    {% endif %}
    
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6 md:gap-8">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'category' %}
            <div class="flex flex-col items-center" {{ block.shopify_attributes }}>
              {% if block.settings.product_image != blank and block.settings.button_link %}
                <a href="{{ block.settings.button_link }}" class="w-full aspect-square mb-4 block">
                  <img 
                    src="{{ block.settings.product_image | image_url: width: 400 }}"
                    srcset="{{ block.settings.product_image | image_url: width: 200 }} 200w,
                            {{ block.settings.product_image | image_url: width: 300 }} 300w,
                            {{ block.settings.product_image | image_url: width: 400 }} 400w"
                    sizes="(max-width: 640px) 150px, (max-width: 768px) 180px, 200px"
                    alt="{{ block.settings.image_alt | default: block.settings.category_name }}"
                    width="{{ block.settings.product_image.width }}"
                    height="{{ block.settings.product_image.height }}"
                    loading="lazy"
                    class="w-full h-full object-contain hover:opacity-90 transition-opacity duration-200 cursor-pointer"
                  >
                </a>
              {% elsif block.settings.product_image != blank %}
                <div class="w-full aspect-square mb-4">
                  <img 
                    src="{{ block.settings.product_image | image_url: width: 400 }}"
                    srcset="{{ block.settings.product_image | image_url: width: 200 }} 200w,
                            {{ block.settings.product_image | image_url: width: 300 }} 300w,
                            {{ block.settings.product_image | image_url: width: 400 }} 400w"
                    sizes="(max-width: 640px) 150px, (max-width: 768px) 180px, 200px"
                    alt="{{ block.settings.image_alt | default: block.settings.category_name }}"
                    width="{{ block.settings.product_image.width }}"
                    height="{{ block.settings.product_image.height }}"
                    loading="lazy"
                    class="w-full h-full object-contain"
                  >
                </div>
              {% endif %}
              
              {% if block.settings.button_text and block.settings.button_link %}
                <a href="{{ block.settings.button_link }}" 
                   class="inline-block px-6 py-3 bg-gray-200 hover:bg-gray-300 text-[#005eb8] font-bold text-sm uppercase rounded transition-colors duration-200">
                  {{ block.settings.button_text }}
                </a>
              {% endif %}
            </div>
        {% endcase %}
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Healthy Aging Categories",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading_text",
      "label": "Heading Text",
      "default": "Shop by Healthy Aging Category"
    }
  ],
  "blocks": [
    {
      "type": "category",
      "name": "Category",
      "settings": [
        {
          "type": "image_picker",
          "id": "product_image",
          "label": "Category Image",
          "info": "Upload an image with hexagon design"
        },
        {
          "type": "text",
          "id": "image_alt",
          "label": "Image Alt Text",
          "info": "Describes the image for accessibility"
        },
        {
          "type": "text",
          "id": "category_name",
          "label": "Category Name (for alt text)",
          "info": "Used for alt text if not specified"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "SHOP NOW"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Healthy Aging Categories",
      "blocks": [
        {
          "type": "category",
          "settings": {
            "category_name": "COLLAGEN PROTEIN",
            "button_text": "SHOP NOW"
          }
        },
        {
          "type": "category",
          "settings": {
            "category_name": "PROTEIN POWDER",
            "button_text": "SHOP NOW"
          }
        },
        {
          "type": "category",
          "settings": {
            "category_name": "GLP-1 SUPPORT",
            "button_text": "SHOP NOW"
          }
        },
        {
          "type": "category",
          "settings": {
            "category_name": "MUSCLE AND JOINT",
            "button_text": "SHOP NOW"
          }
        },
        {
          "type": "category",
          "settings": {
            "category_name": "WEIGHT AND METABOLISM",
            "button_text": "SHOP NOW"
          }
        },
        {
          "type": "category",
          "settings": {
            "category_name": "COGNITIVE HEALTH",
            "button_text": "SHOP NOW"
          }
        }
      ]
    }
  ]
}
{% endschema %}