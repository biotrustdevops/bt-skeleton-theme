{% liquid
  assign heading = section.settings.heading | default: 'Join Our Community'
  assign subheading = section.settings.subheading
  assign content = section.settings.content
  assign button_text = section.settings.button_text
  assign button_url = section.settings.button_url
  assign bg_gradient_start = section.settings.bg_gradient_start | default: '#0B4F9A'
  assign bg_gradient_end = section.settings.bg_gradient_end | default: '#246FC2'
  assign text_color = section.settings.text_color | default: '#ffffff'
%}

<section class="bg-gray-100" data-section-id="{{ section.id }}" style="padding-top: {{ section.settings.padding_top }}px; padding-bottom: {{ section.settings.padding_bottom }}px;">
  <div class="flex flex-col lg:flex-row">
    {% comment %} Left images grid area {% endcomment %}
    <div class="w-full lg:w-1/2 flex items-center justify-center lg:justify-end bg-gray-100">
      <div class="p-8 w-full max-w-3xl">
        <div class="grid grid-cols-2 md:grid-cols-3 gap-5 md:gap-6">
          {% for block in section.blocks %}
            {% case block.type %}
              {% when 'image' %}
                {% if block.settings.image != blank %}
                  <div class="relative group overflow-hidden rounded-lg" {{ block.shopify_attributes }}>
                    <img 
                      src="{{ block.settings.image | image_url: width: 500 }}"
                      srcset="{{ block.settings.image | image_url: width: 250 }} 250w,
                              {{ block.settings.image | image_url: width: 375 }} 375w,
                              {{ block.settings.image | image_url: width: 500 }} 500w"
                      sizes="(max-width: 640px) 188px, (max-width: 768px) 250px, 275px"
                      alt="{{ block.settings.image_alt | default: block.settings.caption | default: shop.name }}"
                      width="{{ block.settings.image.width }}"
                      height="{{ block.settings.image.height }}"
                      loading="lazy"
                      class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
                    >
                    {% if block.settings.caption != blank %}
                      <div class="absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent p-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <p class="text-white text-sm font-medium">{{ block.settings.caption }}</p>
                      </div>
                    {% endif %}
                  </div>
                {% endif %}
            {% endcase %}
          {% endfor %}
        </div>
      </div>
    </div>
    
    {% comment %} Right content area with gradient background {% endcomment %}
    <div class="w-full lg:w-1/2 flex items-center justify-center lg:justify-start" 
         style="background: linear-gradient(90deg, {{ bg_gradient_start }} 0%, {{ bg_gradient_end }} 100%);">
      <div class="px-6 md:px-12 lg:px-16 py-12 md:py-16 lg:py-24 w-full">
        <div class="flex flex-col gap-6 text-center lg:text-left">
          {% if subheading != blank %}
            <h4 class="text-lg font-normal" style="color: {{ text_color }};">
              {{ subheading }}
            </h4>
          {% endif %}
          
          {% if heading != blank %}
            <h2 class="text-4xl md:text-5xl font-bold leading-tight" style="color: {{ text_color }};">
              {{ heading }}
            </h2>
          {% endif %}
          
          {% if content != blank %}
            <div class="text-lg md:text-xl leading-relaxed [&_p]:mb-4 [&_p:last-child]:mb-0" style="color: {{ text_color }};">
              {{ content }}
            </div>
          {% endif %}
          
          {% if button_text != blank and button_url != blank %}
            <div class="mt-2">
              <a href="{{ button_url }}" 
                 class="inline-block px-12 py-4 text-lg md:text-xl font-bold uppercase border-2 rounded-lg transition-all duration-200 hover:bg-white hover:shadow-lg transform hover:-translate-y-0.5"
                 style="color: {{ text_color }}; border-color: {{ text_color }}; background-color: transparent;"
                 onmouseover="this.style.color='{{ bg_gradient_start }}'; this.style.backgroundColor='{{ text_color }}';"
                 onmouseout="this.style.color='{{ text_color }}'; this.style.backgroundColor='transparent';">
                {{ button_text }}
              </a>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Our Community",
  "tag": "section",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "info": "Optional text above the main heading"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Join Our Community"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "Content",
      "default": "<p>Be part of a vibrant community dedicated to healthy aging and wellness. Share your journey, get inspired, and connect with others.</p>"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Join Now"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button Link"
    },
    {
      "type": "header",
      "content": "Design"
    },
    {
      "type": "color",
      "id": "bg_gradient_start",
      "label": "Background Gradient Start",
      "default": "#0B4F9A"
    },
    {
      "type": "color",
      "id": "bg_gradient_end",
      "label": "Background Gradient End",
      "default": "#246FC2"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding Top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 65
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding Bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 65
    }
  ],
  "blocks": [
    {
      "type": "image",
      "name": "Community Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "image_alt",
          "label": "Image Alt Text",
          "info": "Describe the image for accessibility"
        },
        {
          "type": "text",
          "id": "caption",
          "label": "Caption",
          "info": "Optional caption shown on hover"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Our Community",
      "blocks": [
        {
          "type": "image",
          "settings": {
            "image_alt": "Community member enjoying wellness activities"
          }
        },
        {
          "type": "image",
          "settings": {
            "image_alt": "Group fitness class"
          }
        },
        {
          "type": "image",
          "settings": {
            "image_alt": "Healthy lifestyle products"
          }
        },
        {
          "type": "image",
          "settings": {
            "image_alt": "Nutrition and wellness"
          }
        },
        {
          "type": "image",
          "settings": {
            "image_alt": "Active aging community"
          }
        },
        {
          "type": "image",
          "settings": {
            "image_alt": "Wellness journey success"
          }
        }
      ]
    }
  ]
}
{% endschema %}